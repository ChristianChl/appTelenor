{"version":3,"file":"ng-zorro-antd-avatar.js","sources":["../../components/avatar/avatar.component.ts","../../components/avatar/avatar-group.component.ts","../../components/avatar/avatar.module.ts","../../components/avatar/public-api.ts","../../components/avatar/ng-zorro-antd-avatar.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport { NzConfigKey, NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { NgClassInterface, NgStyleInterface, NumberInput, NzShapeSCType, NzSizeLDSType } from 'ng-zorro-antd/core/types';\nimport { InputNumber } from 'ng-zorro-antd/core/util';\n\nconst NZ_CONFIG_MODULE_NAME: NzConfigKey = 'avatar';\n\n@Component({\n  selector: 'nz-avatar',\n  exportAs: 'nzAvatar',\n  template: `\n    <i nz-icon *ngIf=\"nzIcon && hasIcon\" [nzType]=\"nzIcon\"></i>\n    <img *ngIf=\"nzSrc && hasSrc\" [src]=\"nzSrc\" [attr.srcset]=\"nzSrcSet\" [attr.alt]=\"nzAlt\" (error)=\"imgError($event)\" />\n    <span class=\"ant-avatar-string\" #textEl [ngStyle]=\"textStyles\" *ngIf=\"nzText && hasText\">{{ nzText }}</span>\n  `,\n  host: {\n    '[class.ant-avatar-lg]': `nzSize === 'large'`,\n    '[class.ant-avatar-sm]': `nzSize === 'small'`,\n    '[class.ant-avatar-square]': `nzShape === 'square'`,\n    '[class.ant-avatar-circle]': `nzShape === 'circle'`,\n    '[class.ant-avatar-icon]': `nzIcon`,\n    '[class.ant-avatar-image]': `hasSrc `,\n    '[style.width]': 'customSize',\n    '[style.height]': 'customSize',\n    '[style.line-height]': 'customSize',\n    // nzSize type is number when customSize is true\n    '[style.font-size.px]': '(hasIcon && customSize) ? $any(nzSize) / 2 : null'\n  },\n  preserveWhitespaces: false,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class NzAvatarComponent implements OnChanges {\n  static ngAcceptInputType_nzGap: NumberInput;\n\n  readonly _nzModuleName: NzConfigKey = NZ_CONFIG_MODULE_NAME;\n  @Input() @WithConfig() nzShape: NzShapeSCType = 'circle';\n  @Input() @WithConfig() nzSize: NzSizeLDSType | number = 'default';\n  @Input() @WithConfig() @InputNumber() nzGap = 4;\n  @Input() nzText?: string;\n  @Input() nzSrc?: string;\n  @Input() nzSrcSet?: string;\n  @Input() nzAlt?: string;\n  @Input() nzIcon?: string;\n  @Output() readonly nzError = new EventEmitter<Event>();\n\n  hasText: boolean = false;\n  hasSrc: boolean = true;\n  hasIcon: boolean = false;\n  textStyles: NgStyleInterface = {};\n  classMap: NgClassInterface = {};\n  customSize: string | null = null;\n\n  @ViewChild('textEl', { static: false }) textEl?: ElementRef;\n\n  private el: HTMLElement = this.elementRef.nativeElement;\n\n  constructor(\n    public nzConfigService: NzConfigService,\n    private elementRef: ElementRef,\n    private cdr: ChangeDetectorRef,\n    private platform: Platform\n  ) {\n    // TODO: move to host after View Engine deprecation\n    this.elementRef.nativeElement.classList.add('ant-avatar');\n  }\n\n  imgError($event: Event): void {\n    this.nzError.emit($event);\n    if (!$event.defaultPrevented) {\n      this.hasSrc = false;\n      this.hasIcon = false;\n      this.hasText = false;\n      if (this.nzIcon) {\n        this.hasIcon = true;\n      } else if (this.nzText) {\n        this.hasText = true;\n      }\n      this.cdr.detectChanges();\n      this.setSizeStyle();\n      this.notifyCalc();\n    }\n  }\n\n  ngOnChanges(): void {\n    this.hasText = !this.nzSrc && !!this.nzText;\n    this.hasIcon = !this.nzSrc && !!this.nzIcon;\n    this.hasSrc = !!this.nzSrc;\n\n    this.setSizeStyle();\n    this.notifyCalc();\n  }\n\n  private calcStringSize(): void {\n    if (!this.hasText) {\n      return;\n    }\n\n    const childrenWidth = this.textEl!.nativeElement.offsetWidth;\n    const avatarWidth = this.el.getBoundingClientRect().width;\n    const offset = this.nzGap * 2 < avatarWidth ? this.nzGap * 2 : 8;\n    const scale = avatarWidth - offset < childrenWidth ? (avatarWidth - offset) / childrenWidth : 1;\n\n    this.textStyles = {\n      transform: `scale(${scale}) translateX(-50%)`\n    };\n    if (this.customSize) {\n      Object.assign(this.textStyles, {\n        lineHeight: this.customSize\n      });\n    }\n    this.cdr.detectChanges();\n  }\n\n  private notifyCalc(): void {\n    // If use ngAfterViewChecked, always demands more computations, so......\n    if (this.platform.isBrowser) {\n      setTimeout(() => {\n        this.calcStringSize();\n      });\n    }\n  }\n\n  private setSizeStyle(): void {\n    if (typeof this.nzSize === 'number') {\n      this.customSize = `${this.nzSize}px`;\n    } else {\n      this.customSize = null;\n    }\n    this.cdr.markForCheck();\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'nz-avatar-group',\n  exportAs: 'nzAvatarGroup',\n  template: `\n    <ng-content></ng-content>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    class: 'ant-avatar-group'\n  }\n})\nexport class NzAvatarGroupComponent {}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\nimport { NzAvatarGroupComponent } from './avatar-group.component';\nimport { NzAvatarComponent } from './avatar.component';\n\n@NgModule({\n  declarations: [NzAvatarComponent, NzAvatarGroupComponent],\n  exports: [NzAvatarComponent, NzAvatarGroupComponent],\n  imports: [BidiModule, CommonModule, NzIconModule, PlatformModule]\n})\nexport class NzAvatarModule {}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nexport * from './avatar.component';\nexport * from './avatar.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {NzAvatarGroupComponent as ɵa} from './avatar-group.component';"]}